<!DOCTYPE html>
<html>
   <head>
      <title>Collisions</title>
      <meta charset="UTF-8"> 
   </head>
   <body style="color: #ffffff; background-color: #000000" onload="main()">
      <p id="p">
         <canvas id="gc" width="500" height="500"
          style="border: 1px solid white">
            Your browser does not support the HTML5
            <code>canvas</code> element.   
         </canvas>
         <br />
         Collisions: <label id="lblCollisions" style="color:#00ff00"></label>
      </p>
      <script src="point.js"></script>
      <script src="velocity.js"></script>
      <script src="ball.js"></script>
      <script src="main.js"></script>
      <!--
      <script type="text/javascript">
         var canvas;
         var context;
         var boundRect;
         var screenObj = {};
         var ballvec = [];
         var lblCollisions = getDOM('lblCollisions');
         var collisions = 0;
         var ballCount = 10;
         
         window.onload = function()
         {
            getDOM('p').style.textAlign = 'center';
            canvas = getDOM('gc');
            context = canvas.getContext('2d');
            boundRect = canvas.getBoundingClientRect();
            screenObj.fps = 60;
            screenObj.width = canvas.width;
            screenObj.height = canvas.height;
            
            for (i = 0; i < ballCount; i++)
            {
               var ball = {};
               initBall(ball);
               ballvec.push(ball);
            }
            
            setInterval(draw, 1000/screenObj.fps);
         }
         
         window.onresize = function()
         {
            boundRect = canvas.getBoundingClientRect();
            console.log(
               'canvas @ (' + boundRect.top + ', ' + boundRect.left + ')'
            );
         }
         
         function getDOM(id)
         {
            return document.getElementById(id);
         }
         
         function draw()
         {
            context.fillStyle = '#000000';
            context.fillRect(0, 0, screenObj.width, screenObj.height);
            
            for (i = 0; i < ballvec.length; i++)
            {
               ballMove(ballvec[i]);
               ballDraw(ballvec[i]);
               lblCollisions.innerHTML = collisions;
            }
         }
         
         function initBall(ball)
         {
            maxInitSpeed = 1.0;
            ball.W = 15;
            ball.H = 15;
            ball.X = randomize(0, screenObj.width - ball.W - 1);
            ball.Y = randomize(0, screenObj.height - ball.H - 1);
            ball.Dx = randomize(-maxInitSpeed, maxInitSpeed);
            ball.Dy = randomize(-maxInitSpeed, maxInitSpeed);
            ball.color = '#ffff00';
         }
         
         function ballDraw(ball)
         {
            context.fillStyle = ball.color;
            context.fillRect(ball.X, ball.Y, ball.W, ball.H);
         }
         
         function ballMove(ball)
         {
            if (ball.X + ball.W + ball.Dx >= screenObj.width || ball.X <= 0)
            {
               ball.Dx = -ball.Dx;
               collisions++;
            }
            
            if (ball.Y + ball.H + ball.Dy >= screenObj.height || ball.Y <= 0)
            {
               ball.Dy = -ball.Dy;
               collisions++;
            }
            
            ball.X += ball.Dx;
            ball.Y += ball.Dy;
         }
         
         function hasPoint(ball, x, y)
         {
            return (x >= ball.X && x <= ball.X + ball.W) &&
                   (y >= ball.Y && y <= ball.Y + ball.H);
         }
         
         function ballClick(event)
         {
            var x = event.clientX - boundRect.left;
            var y = event.clientY - boundRect.top;
            
            console.log('mouseclick @ (' + x + ', ' + y + ')');
            
            for (i = 0; i < ballvec.length; i++)
            {
               if (hasPoint(ballvec[i], x, y))
               {
                  ballvec[i].Dx = -(ballvec[i].Dx * 1.15);
                  ballvec[i].Dy = -(ballvec[i].Dy * 1.15);
               }
            }
         }
         
         function randomize(minimum, maximum)
         {
            return Math.random() * (maximum - minimum) + minimum;
         }
      </script>
      -->
   </body>
</html>
